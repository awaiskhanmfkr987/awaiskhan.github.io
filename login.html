<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Login | ASkhan Online Academy</title>
<style>
  body {font-family: Arial, Helvetica, sans-serif; background:#f4f6f8; margin:0;}
  .login-box {max-width:400px; margin:100px auto; background:white; padding:30px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
  h2{text-align:center;color:#1e3c72;}
  input{width:100%; padding:12px; margin:10px 0; border:1px solid #ccc; border-radius:6px;}
  button{width:100%; padding:12px; background:#1e3c72; color:white; border:none; border-radius:6px; font-size:16px; cursor:pointer;}
  button:hover{background:#16315f;}
  .note{text-align:center; font-size:14px; color:#555; margin-top:10px;}
</style>
</head>
<body>

<div class="login-box">
  <h2>Student Login</h2>
  <input type="text" id="studentId" placeholder="Student ID">
  <input type="text" id="username" placeholder="Your Name">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p class="note">Login only after admission confirmation</p>
</div>

<script>
let admittedStudents = [];

// ===== Fetch students from Google Sheet JSON =====
fetch('https://script.google.com/macros/s/AKfycby-bhh7UgItwuWb0_M_GL_eMk0QWrja5I04DSygx36S7w5RH-3oEJZTdACoiZhZRZk/exec')
  .then(res => res.json())
  .then(data => {
    admittedStudents = data;
    console.log('Admitted students loaded:', admittedStudents);
  })
  .catch(err => console.error('Error fetching students:', err));

// ===== Login function =====
function login(){
  const id = document.getElementById('studentId').value.trim();
  const name = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value.trim();

  const student = admittedStudents.find(s => 
    s.id === id && s.name.toLowerCase() === name.toLowerCase() && s.password === pass
  );

  if(student){
    localStorage.setItem('studentData', JSON.stringify(student));
    window.location.href='dashboard.html';
  } else {
    alert('‚ùå Invalid credentials or admission not confirmed yet.');
  }
}
</script>

</body>
</html>
